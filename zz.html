<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Farmers' Ecommerce</title>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>
    <link href="css/homepage.css" rel="stylesheet">
</head>
<body ng-app="farmApp" ng-controller="MainController">
    <header>
        <h1>Agri-connect</h1>
        <p>Nurturing Nature, Empowering Farmers</p>
    </header>
    <nav>
        <a ng-click="navigate('home')">Home</a>
        <a ng-click="navigate('products')">Products</a>
        <a ng-click="navigate('subsidy')">Subsidy Info</a>
        <a ng-click="navigate('cropManual')">Crop Manual</a>
        <a ng-click="navigate('login')">Login</a>
        <a ng-click="navigate('register')">Register</a>
        <a ng-click="navigate('sell')">Sell Products</a>
        <a ng-click="navigate('cart')">Cart ({{ cart.length }})</a>
    </nav>

    <div class="container">
        <div ng-show="currentPage === 'home'">
            <h2>Welcome to KrushiVal</h2>
            <p>Empowering Farmers and Connecting Consumers</p>
        </div>

        <div ng-show="currentPage === 'products'">
            <h2>Products</h2>
            <button ng-click="toggleUserProducts()">User Products</button>
            <button ng-click="toggleFarmerProducts()">Farmer Products</button>

            <div ng-show="showUserProducts">
                <h3>User Products</h3>
                <div class="category-buttons">
                    <button ng-repeat="(category, items) in products.users" ng-click="selectUserCategory(category)">
                        {{ category }}
                    </button>
                    <button ng-click="selectUserCategory('productsByFarmers')">Products by Farmers</button>
                </div>
                <div class="product-container">
                    <div class="product" ng-repeat="product in products.users[selectedUserCategory]">
                        <img ng-src="{{ product.image }}" alt="{{ product.name }}">
                        <h4>{{ product.name }}</h4>
                        <p>Price: ₹{{ product.price }}</p>
                        <button ng-click="addToCart(product)">Add to Cart</button>
                        <button ng-click="showCheckoutForm(product)">Buy Now</button>
                    </div>
                </div>
            </div>

            <div ng-show="showFarmerProducts">
                <h3>Farmer Products</h3>
                <div class="category-buttons">
                    <button ng-repeat="(category, items) in products.farmers" ng-click="selectFarmerCategory(category)">
                        {{ category }}
                    </button>
                </div>
                <div class="product-container">
                    <div class="product" ng-repeat="product in products.farmers[selectedFarmerCategory]">
                        <img ng-src="{{ product.image }}" alt="{{ product.name }}">
                        <h4>{{ product.name }}</h4>
                        <p>Price: ₹{{ product.price }}</p>
                        <button ng-click="addToCart(product)">Add to Cart</button>
                        <button ng-click="showCheckoutForm(product)">Buy Now</button> 
                    </div>
                </div>
            </div>
        </div>

        <div ng-show="currentPage === 'sell'">
            <h2>Sell Products</h2>
            <div class="form-container">
                <input type="text" placeholder="Product Name" ng-model="sellProductName">
                <input type="number" placeholder="Price" ng-model="sellProductPrice">
                <input type="text" placeholder="Category" ng-model="sellProductCategory">
                <input type="file" onchange="angular.element(this).scope().sellProductImage = this.files[0]">
                <button ng-click="sellProduct()">Sell Product</button>
            </div>
        </div>

        <div ng-show="currentPage === 'register'">
            <div class="form-container">
                <h2>Register</h2>
                <label>Role:</label>
                <select ng-model="registerRole">
                    <option value="user">User</option>
                    <option value="farmer">Farmer</option>
                </select>
                <input type="text" placeholder="Name" ng-model="registerName">
                <input type="text" placeholder="Email" ng-model="registerEmail">
                <input type="password" placeholder="Password" ng-model="registerPassword">
                <input type="text" placeholder="Farm Name" ng-show="registerRole === 'farmer'" ng-model="registerFarmName">
                <button ng-click="register()">Register</button>
            </div>
        </div>

        <div ng-show="currentPage === 'login'">
            <div class="form-container">
                <h2>Login</h2>
                <label>Role:</label>
                <select ng-model="loginRole">
                    <option value="user">User</option>
                    <option value="farmer">Farmer</option>
                    <option value="admin">Admin</option>
                </select>
                <input type="text" placeholder="Email" ng-model="loginEmail">
                <input type="password" placeholder="Password" ng-model="loginPassword">
                <button ng-click="login()">Login</button>
            </div>
        </div>

        <div ng-show="currentPage === 'cart'">
            <h2>Shopping Cart</h2>
            <div class="product-container" ng-if="cart.length > 0">
                <div class="product" ng-repeat="product in cart">
                    <img ng-src="{{ product.image }}" alt="{{ product.name }}">
                    <h4>{{ product.name }}</h4>
                    <p>Price: ₹{{ product.price }}</p>
                    <p>Quantity: 
                        <button ng-click="decreaseQuantity(product)">-</button>
                        {{ product.quantity }}
                        <button ng-click="increaseQuantity(product)">+</button>
                    </p>
                    <button ng-click="removeFromCart(product)">Remove</button>
                    <button ng-click="showCheckoutForm(product)">Buy Now</button><br>
                </div>
                <h3>Total: ₹{{ getTotalPrice() }}</h3>
            </div>
        </div>

        <div class="modal" ng-show="showCheckout">
            <div class="modal-content">
                <h2>Checkout</h2>
                <p>Product: <strong>{{ selectedProduct.name }}</strong></p>
                <p>Price: ₹{{ selectedProduct.price }}</p>
                <input type="text" placeholder="Full Name" ng-model="checkoutName" required>
                <input type="text" placeholder="Address" ng-model="checkoutAddress" required>
                <input type="text" placeholder="Contact Number" ng-model="checkoutContact" required>
                
                <label>Payment Mode:</label>
                <select ng-model="checkoutPaymentMode">
                    <option value="COD">Cash on Delivery</option>
                    <option value="UPI">UPI</option>
                    <option value="Card">Credit/Debit Card</option>
                </select>
                <input type="text" placeholder="Enter UPI ID" ng-model="checkoutUPIID" ng-show="checkoutPaymentMode === 'UPI'" required>

                <div ng-show="checkoutPaymentMode === 'Card'">
                    <input type="text" placeholder="Card Number" ng-model="checkoutCardNumber" required>
                    <input type="text" placeholder="Card Expiry (MM/YY)" ng-model="checkoutCardExpiry" required>
                    <input type="password" placeholder="CVV" ng-model="checkoutCardCVV" required>
                </div>

                <button ng-click="confirmPurchase()">Confirm Purchase</button>
                <button class="close-btn" ng-click="cancelCheckout()">Cancel</button>
            </div>
        </div>
    </div>
    <div ng-show="currentPage === 'subsidy'">
        <h2>Subsidy Information</h2>
        <table border="1" width="100%" style="border-collapse: collapse; text-align: center;">
            <tr>
                <th>Subsidy Name</th>
                <th>Amount</th>
                <th>Description</th>
                <th>Eligibility</th>
                <th>Category</th>
                <th>Documents Required</th>
                <th>Action</th>
            </tr>
            <tr ng-repeat="subsidy in subsidies">
                <td>{{ subsidy.name }}</td>
                <td>₹{{ subsidy.amount }}</td>
                <td>{{ subsidy.description }}</td>
                <td>{{ subsidy.eligibility }}</td>
                <td>{{ subsidy.category }}</td>
                <td>{{ subsidy.documents }}</td>
                <td><button ng-click="applyForSubsidy(subsidy)">Apply</button></td>
            </tr>
        </table>
    </div>
    <div class="modal" ng-show="showSubsidyForm">
        <div class="form-container">
            <h3>Apply for {{ selectedSubsidy.name }}</h3>
            <label>Full Name:</label>
            <input type="text" ng-model="farmerDetails.name" placeholder="Enter your name" required>
    
            <label>Aadhar Number:</label>
            <input type="text" ng-model="farmerDetails.aadhar" placeholder="Enter Aadhar number" required>
    
            <label>Land Area (in acres):</label>
            <input type="number" ng-model="farmerDetails.landArea" placeholder="Enter land area" required>
    
            <label>Bank Account Number:</label>
            <input type="text" ng-model="farmerDetails.bankAccount" placeholder="Enter bank account number" required>
    
            <button class="submit-btn" ng-click="submitSubsidyApplication()">Submit Application</button>
            <button class="close-btn" ng-click="closeSubsidyForm()">Cancel</button>
        </div>
    </div>
        
    <div ng-show="currentPage === 'cropManual'">
        <h2><center>Crop manual</center></h2>
    
        <!-- Category Buttons -->
        <div class="category-buttons">
           <center> <button ng-click="selectCategory('kharif')">Kharif Crops</button></center>
           <center><button ng-click="selectCategory('rabi')">Rabi Crops</button></center>
        </div>
    
        <!-- Display Crops -->
        <div class="product-container">
            <div class="product" ng-repeat="crop in crops[selectedCategory]">
                <img ng-src="{{ crop.image }}" alt="{{ crop.name }}">
                <h4>{{ crop.name }}</h4>
                <button ng-click="openCropPage(crop.link)">View Details</button>
            </div>
        </div>
    </div>
    <script src="js/homepage.js"></script>


</body>
</html>